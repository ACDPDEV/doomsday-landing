---
import Likes from "./Likes.astro";

interface Props {
    id: number;
    videoId: string;
    background: string;
    characters: { name: string; image: string | null }[];
    lang?: "en" | "es";
}

const { id, videoId, background, characters, lang = "en" } = Astro.props;

const labels = {
    en: {
        views: "views",
        likes: "likes",
        play: "Watch Trailer",
    },
    es: {
        views: "vistas",
        likes: "me gusta",
        play: "Ver Trailer",
    },
};

const t = labels[lang];
---

<section
    class="relative w-full h-screen flex"
    data-trailer-section
    data-video-id={videoId}
    data-trailer-id={id}
>
    <div class="absolute inset-0 z-0">
        <img
            src={`/assets/backgrounds/${background}`}
            alt={`Trailer ${id} Background`}
            class="w-full h-full object-cover"
        />
        <div class="absolute bottom-0 right-0 left-0 h-12 bg-[#080D0B]"></div>
    </div>

    <div
        class="absolute bottom-12 flex flex-row justify-between bg-linear-to-t/hsl from-[#080D08] to-transparent h-[calc(50%)] z-10 w-full p-16"
    >
        <div class="flex flex-col justify-between">
            <div class="flex flex-col text-text font-bold gap-3">
                <h1 class="text-7xl">
                    TRAILER {id}
                </h1>

                <h3 class="text-lg flex flex-row gap-4 font-semibold">
                    <span>Marvel Studios</span>
                    <span>¬∑</span>
                    <span><Likes server:defer videoId={videoId} /> üëç</span>
                    <span>¬∑</span>
                    <span>23 dic 2025</span>
                </h3>
            </div>

            <a
                href={`https://www.youtube.com/watch?v=${videoId}`}
                class="flex flex-row gap-4 p-4 rounded-xl w-fit bg-[#2A5FD2] text-text font-semibold text-lg justify-center items-center"
            >
                <img
                    src="/assets/icons/play.svg"
                    alt="Play"
                    class="w-5 h-5 text-text"
                />
                <span>{t.play}</span>
            </a>
        </div>

        <div class="flex flex-wrap justify-center gap-4">
            {
                characters.map((char) => (
                    <div class="flex flex-col items-center">
                        {char.image ? (
                            <img
                                src={`/assets/characters/${char.image}`}
                                alt={char.name}
                                class="w-20 h-20 md:w-24 md:h-24 object-contain rounded-full bg-black/40"
                            />
                        ) : (
                            <div class="w-20 h-20 md:w-24 md:h-24 bg-black/40 rounded-full flex justify-center items-center">
                                ?
                            </div>
                        )}

                        <span class="mt-2 text-sm text-center text-gray-300">
                            {char.name}
                        </span>
                    </div>
                ))
            }
        </div>
    </div>
</section>
